---
title: "Data Prep: ALL Cars"
---

Read in cleaned country data files.
```{r}
library(tidyverse)
library(readxl)
# Function to read excel file and remove the autogenerated index column.
read_excel_noindex <- function(filename) {
  x <- read_excel(filename)
  x %>%
    select(-`...1`) -> x
  x
}

# Read files (total countries: 34)
europe <- read_excel_noindex("EUROPEcars2.xlsx"); europe
canada <- read_excel_noindex("CANADAcars.xlsx"); canada
skorea <- read_excel_noindex("SKcars.xlsx"); skorea
china <- read_excel_noindex("CHcars.xlsx"); china
brazil <- read_excel_noindex("BRAZILcars.xlsx"); brazil
japan <- read_excel_noindex("JPcars.xlsx"); japan
us <- read_excel_noindex("UScars.xlsx"); us
australia <- read_excel_noindex("AUSTRALIACarCountByFuel.xlsx"); australia
```


Merge the files together to form one large car dataset. Add info on whether the data is for all vehicles or only light (passenger) vehicles AND whether it's vehicle registrations or sales.
Units: # of car sales/registrations, depending on which data was available.
```{r}
carData <- rbind(europe, canada, skorea, china, brazil, japan, us, australia)
carData %>% 
  arrange(Region, Year) %>% 
  mutate(id=paste(Region,Year,sep="_")) %>% 
  select(id,Petrol,Diesel,Hybrid,Electric,`LPG/NaturalGas`,Other) -> carData
carData
```


```{r}
# Export to excel file so it can be easily processed after
library(xlsx)
write.xlsx(carData, "ALLcars.xlsx")
```


